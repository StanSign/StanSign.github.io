---
title: 7)π“±iOSμ•±κ°λ° - API Gatewayλ΅ DBμ— μ •λ³΄ μ…λ ¥/μμ •ν•κΈ°
tags: [Assemble, SQL, AWS]
style: fill
color: secondary
description: AWS API Gatewayμ™€ Lambdaλ¥Ό ν™μ©ν•μ—¬ RDSμ— λ°μ΄ν„°λ¥Ό μ…λ ¥ν•΄λ³΄μ
---

DB ν‹€μ΄ μ–΄λμ •λ„ λ§μ¶°μ΅μΌλ‹ μ‹¤μ λ΅ λ°μ΄ν„°λ¥Ό λ„£μ–΄λ³΄λ ¤κ³  ν•©λ‹λ‹¤. μ΄μ „μ— λ§λ“¤μ–΄λ‘μ—λ Lambda ν•¨μμ™€ API Gatewayλ¥Ό μ‚¬μ©ν•λ©΄ RESTfulν•κ² λ°μ΄ν„°λ¥Ό μ…λ ¥ν•΄μ¤„ μ μμµλ‹λ‹¤.

### API Gateway

<img src="./cap01.png" alt="api gateway" width="400">

μ„μ™€ κ°™μ΄ λ¦¬μ†μ¤λ¥Ό μƒμ„±ν•΄μ£Όκ³  PUT λ©”μ„λ“λ¥Ό μ¶”κ°€ν•΄μ£Όμ—μµλ‹λ‹¤. API Gatewayμ—μ„ μ§€μ›ν•λ” λ©”μ„λ“λ” μ΄ 6κ°€μ§€μΈλ°, HTTP λ©”μ„λ“μ™€ λ™μΌν• μ—­ν• μ„ ν•©λ‹λ‹¤.
#### HTTP Method

##### 1. ANY
μ•„λ λ‹¤μ„― λ©”μ„λ“ μ¤‘ μ ν•©ν• λ©”μ„λ“λ¥Ό κ³¨λΌ μ‹¤ν–‰ν•λ‹¤.
##### 2. GET
λ°μ΄ν„°λ¥Ό μ΅°ν/κ²€μƒ‰ν•  λ• μ‚¬μ©λλ‹¤. μ”μ²­μ‹μ— body κ°’κ³Ό content-type μ—†μ΄ urlμ— νλΌλ―Έν„°λ§ μ…λ ¥ν•μ—¬ μ‚¬μ©λλ‹¤. μ”μ²­μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λλ©΄ 200(OK) λ©”μ‹μ§€μ™€ ν•¨κ» body κ°’μ— λ°μ΄ν„°κ°€ μ €μ¥λμ–΄ λμ•„μ¨λ‹¤.
~~~
GET /films/2024012802
~~~
##### 3. POST
μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό μƒμ„±ν•  λ• μ‚¬μ©λλ‹¤. μ”μ²­μ‹μ— body κ°’κ³Ό content-typeμ„ ν•„μ”λ΅ ν•κ³ , μƒμ„±ν• λ•λ§ μ‚¬μ©λκΈ° λ•λ¬Έμ— μ΄λ―Έ μ¤‘λ³µλ λ°μ΄ν„°κ°€ μλ”λΌλ„ λ¬΄μ΅°κ±΄ μƒμ„±μ„ μ‹λ„ν•λ‹¤. urlμ— λ¨λ“  λ°μ΄ν„°λ¥Ό λ„£λ” κ²ƒμ€ λ„λ¬΄λ‚ λ¶νΈν•κΈ° λ•λ¬Έμ— bodyμ— λ°μ΄ν„°λ¥Ό λ„£μ–΄ λ³΄λ‚Έλ‹¤. μ„±κ³µμ μΌλ΅ λ°μ΄ν„°λ¥Ό μƒμ„±ν•λ©΄ 201(created) λ©”μ‹μ§€μ™€ ν•¨κ» body κ°’μ— μƒμ„±λ κ°’μ΄ μ €μ¥λμ–΄ λμ•„μ¨λ‹¤.
~~~
POST /films
body: {fID: 2023042403, fNM: "μν™”" ... }
content-type: "application/json"
~~~
##### 4. PUT
λ°μ΄ν„°λ¥Ό μ—…λ°μ΄νΈ/μƒμ„±ν•  λ• μ‚¬μ©λλ‹¤. POSTμ™€ λΉ„μ·ν•μ§€λ§ μ΄λ―Έ μ΅΄μ¬ν•λ” λ°μ΄ν„°μ— λ€ν•΄μ„λ” μ—…λ°μ΄νΈκ°€ μ΄λ£¨μ–΄μ§„λ‹¤. (idempotent)
~~~
PUT /films/2023042403
body: {fNM: "μν™”2" ... }
content-type: "application/json"
~~~
##### 5. DELETE
μ΅΄μ¬ν•λ” λ°μ΄ν„°λ¥Ό μ‚­μ ν•  λ• μ‚¬μ©λλ‹¤. GETκ³Ό λΉ„μ·ν•κ² urlμ„ ν†µν•΄μ„ μ‚­μ ν•  λ°μ΄ν„°λ¥Ό νλΌλ―Έν„°λ΅ λ°›λ”λ‹¤. μ„±κ³µμ μΌλ΅ λ°μ΄ν„°κ°€ μ‚­μ λλ©΄ λ³„λ„μ body λ‚΄μ© μ—†μ΄ μ„±κ³µ μ‘λ‹µλ§ λμ•„μ¨λ‹¤.
~~~
DELETE /films/2023042403
~~~